<!DOCTYPE html>

<!--
 * micropolisJS. Adapted by Graeme McCutcheon from Micropolis.
 *
 * This code is released under the GNU GPL v3, with some additional terms.
 * Please see the files LICENSE and COPYING for details. Alternatively,
 * consult https://graememcc.github.io/micropolisJS/LICENSE and
 * https://graememcc.github.io/micropolisJS/COPYING
 *
 * -->

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, user-scalable=no">
    <meta name="description" content="Play micropolisJS and build a virtual city in your browser! micropolisJS is a handwritten HTML5/Javascript port of Micropolis, the open-source release of SimCity (the 1989 version).">
    <link rel="stylesheet" media="screen" type="text/css" href="css/style.css">
    <title>micropolisJS</title>
  </head>
  <body>
    <img id="tiles" class="imageData" src="images/tiles.png" alt="These are the game's principal tiles">
    <img id="snowtiles" class="imageData" src="images/tilessnow.png" alt="These are the game's alternate tiles">
    <img id="sprites" class="imageData" src="images/sprites.png" alt="These are the game's sprites">
    <header id="header" class="chunk border-bottom padding10">
      <div class="left inlineblock">
        <h1 id="title" class="white fontlarge">micropolisJS</h1>
      </div>
      <nav class="white right padding10 inlineblock">
        <ul>
          <li class="padding10"><a href="about.html" target="_blank">About</a></li>
          <li class="padding10"><a href="https://github.com/graememcc/micropolisJS" target="_blank">GitHub</a></li>
        </ul>
      </nav>
    </header>
    <div id="wrapper">
      <main id="canvasContainer">
        <div class="hidden" id="opaque"></div>
        <div data-hasscript="false" id="loadingBanner" class="alignCenter padding10 mintcream chunk shadow centred">Loading</div>
        <div id="splash" class="mintcream awaitGeneration open shadow padding10 centred">
          <h2 class="chunk alignCenter">Welcome!</h2>
          <p>micropolisJS is a handmade Javascript port of the open-source city simulator <cite>Micropolis</cite></p>
          <div id="splashContainer"></div>
          <div id="splashButtonContainer">
            <div id="splashButtons">
              <button id="splashLoad" class="width140 block loadSave splashButton" disabled>Load game</button>
              <button id="splashPlay" class="width140 block margin10 splashButton">Play this map</button>
              <button id="splashGenerate" class="width140 block margin10 splashButton">Generate another</button>
            </div>
          </div>
        </div>
        <div id="start" class="mintcream open shadow padding10 centred">
          <h2 class="chunk alignCenter">New Game</h2>
          <form id="playForm">
            <label for="nameForm">City name (max 15 letters)</label>
            <input id="nameForm" autofocus required class="margin10" type="text" maxlength="15">
            Difficulty
            <input type="radio" class="difficulty" name="difficulty" id="difficultyEasy" value="0" checked="checked"><label for="difficultyEasy">Easy</label>
            <input type="radio" class="difficulty" name="difficulty" id="difficultyMed" value="1"><label for="difficultyMed">Medium</label>
            <input type="radio" class="difficulty" name="difficulty" id="difficultyHard" value="2"><label for="difficultyHard">Hard</label>
            <div id="playSubmitDiv">
              <input id="playit" type="submit" value="Play!">
            </div>
          </form>
        </div>
        <div id="infobar" class="alignCenter leftedge open width140 padding10 controlShadow mintcream z1 initialHidden">
          <div class="inner">
            <div class="semibold chunk">
              <span id="name">Your Name Here</span>
            </div>
            <div>
              <span id="date">Jan 1900</span>
            </div>
            <div class="elided">
              Funds $<span id="funds">20000</span>
            </div>
            <div class="elided">
              Score: <span id="score">0</span>
            </div>
            <div>
              <span id="cclass">VILLAGE</span>
            </div>
            <div class="elided">
              Population:<br> <span id="population">0</span>
            </div>
          </div>
        </div>
        <div id="miscButtons" class="alignCenter leftedge open controlShadow width140 padding10 mintcream z1 initialHidden">
          <div class="inner">
            <div><button id="budgetRequest" class="miscButton">Budget</button></div>
            <div><button id="evalRequest" class="miscButton">Evaluation</button></div>
            <div><button id="disasterRequest" class="miscButton">Disasters</button></div>
            <div><button id="saveRequest" class="miscButton loadSave" disabled>Save</button></div>
            <div><button id="settingsRequest" class="miscButton">Settings</button></div>
            <div><button id="screenshotRequest" class="miscButton">Take Picture</button></div>
            <div><button id="pauseRequest" class="miscButton">Pause</button></div>
          </div>
        </div>
        <!-- ... all other modals unchanged ... -->
      </main>
    </div>

    <!-- scripts -->
    <script>
      // If we got here, then we have script. Note we don't necessarily have jQuery though
      [].forEach.call(document.querySelectorAll('[data-hasscript]'), function(elem) {
        elem.setAttribute('data-hasscript', 'true');
      });
    </script>
    <script defer src="thirdparty/jquery/jquery-2.1.1.min.js"></script>

    <!-- Disable Nag / Eval / Overlay & restore building preview -->
    <style>
      #evalWindow, .modal, #opaque, #notifications { display: none !important; pointer-events: none !important; }
      #canvasContainer { pointer-events: auto !important; cursor: default !important; }
    </style>
    <script>
      // Kill only the 30-minute nag timer
      const _orig = window.setTimeout;
      window.setTimeout = function(fn, delay) { return delay === 1800000 ? 0 : _orig(fn, delay); };
      // Stub out any direct calls
      window.nagMessage = () => {};
      window.showEvalWindow = () => {};
      // Clear any leftover banners
      document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('evalWindow')?.classList.remove('open');
        const note = document.getElementById('notifications'); if (note) note.innerHTML = '';
      });
    </script>
    <script defer src="src/micropolis.js?f2dcf3e190bdf59fa9c2"></script>
  </body>
</html>
